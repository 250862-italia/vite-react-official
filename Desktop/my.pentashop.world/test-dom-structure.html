<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test DOM Structure - Wash The World</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .test-result { padding: 10px; margin: 10px 0; border-radius: 5px; }
        .success { background-color: #d4edda; color: #155724; border: 1px solid #c3e6cb; }
        .error { background-color: #f8d7da; color: #721c24; border: 1px solid #f5c6cb; }
        .info { background-color: #d1ecf1; color: #0c5460; border: 1px solid #bee5eb; }
        pre { background-color: #f8f9fa; padding: 10px; border-radius: 3px; overflow-x: auto; }
    </style>
</head>
<body>
    <h1>üîç Test Struttura DOM - Wash The World</h1>
    
    <div id="test-results"></div>
    
    <script>
        function runTests() {
            const results = document.getElementById('test-results');
            
            // Test 1: Verifica se l'applicazione √® caricata
            function testAppLoading() {
                const root = document.querySelector('#root');
                if (!root) {
                    return { success: false, message: 'Elemento #root non trovato' };
                }
                
                const appDiv = root.querySelector('.App');
                if (!appDiv) {
                    return { success: false, message: 'Elemento .App non trovato' };
                }
                
                return { success: true, message: 'Applicazione caricata correttamente' };
            }
            
            // Test 2: Verifica struttura specifica
            function testSpecificStructure() {
                const target = document.querySelector('#root > div > div');
                if (!target) {
                    return { success: false, message: 'Elemento #root > div > div non trovato' };
                }
                
                return { 
                    success: true, 
                    message: `Elemento trovato: ${target.tagName} con classe: ${target.className}`,
                    element: target
                };
            }
            
            // Test 3: Verifica contenuto
            function testContent() {
                const target = document.querySelector('#root > div > div');
                if (!target) {
                    return { success: false, message: 'Elemento target non trovato' };
                }
                
                const content = target.innerHTML;
                const hasContent = content.trim().length > 0;
                
                return { 
                    success: hasContent, 
                    message: hasContent ? 'Elemento ha contenuto' : 'Elemento vuoto',
                    content: content.substring(0, 200) + (content.length > 200 ? '...' : '')
                };
            }
            
            // Test 4: Verifica routing
            function testRouting() {
                const currentPath = window.location.pathname;
                const routes = ['/login', '/dashboard', '/mlm', '/admin'];
                
                if (routes.includes(currentPath)) {
                    return { success: true, message: `Route attiva: ${currentPath}` };
                } else {
                    return { success: false, message: `Route non riconosciuta: ${currentPath}` };
                }
            }
            
            // Esegui test
            const tests = [
                { name: 'Caricamento App', test: testAppLoading },
                { name: 'Struttura Specifica', test: testSpecificStructure },
                { name: 'Contenuto Elemento', test: testContent },
                { name: 'Routing', test: testRouting }
            ];
            
            tests.forEach(({ name, test }) => {
                const result = test();
                const div = document.createElement('div');
                div.className = `test-result ${result.success ? 'success' : 'error'}`;
                div.innerHTML = `
                    <h3>${name}</h3>
                    <p>${result.message}</p>
                    ${result.content ? `<pre>${result.content}</pre>` : ''}
                `;
                results.appendChild(div);
            });
            
            // Aggiungi informazioni di debug
            const debugDiv = document.createElement('div');
            debugDiv.className = 'test-result info';
            debugDiv.innerHTML = `
                <h3>üîß Informazioni Debug</h3>
                <p><strong>URL:</strong> ${window.location.href}</p>
                <p><strong>User Agent:</strong> ${navigator.userAgent}</p>
                <p><strong>Timestamp:</strong> ${new Date().toISOString()}</p>
            `;
            results.appendChild(debugDiv);
        }
        
        // Esegui test quando la pagina √® caricata
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', runTests);
        } else {
            runTests();
        }
        
        // Esegui test anche dopo un delay per React
        setTimeout(runTests, 2000);
        setTimeout(runTests, 5000);
    </script>
</body>
</html> 